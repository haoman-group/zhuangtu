/*
Copyright 2013, KISSY UI Library v1.32
MIT Licensed
build time: Sep 4 21:10
*/
KISSY.add("event/dom/base/api",function(g,f,a,c,h,k,m){function l(b,a){var d=c[a]||{};b.originalType||(b.selector?d.delegateFix&&(b.originalType=a,a=d.delegateFix):d.onFix&&(b.originalType=a,a=d.onFix));return a}function n(b,a,d){var i,j,c,d=g.merge(d),a=l(d,a);i=k.getCustomEvents(b,1);if(!(c=i.handle))c=i.handle=function(b){var a=b.type,i=c.currentTarget;if(!(k.triggeredEvent==a||"undefined"==typeof KISSY))if(a=k.getCustomEvent(i,a))return b.currentTarget=i,b=new m(b),a.notify(b)},c.currentTarget=
b;if(!(j=i.events))j=i.events={};i=j[a];i||(i=j[a]=new k({type:a,fn:c,currentTarget:b}),i.setup());i.on(d);b=null}var i=f._Utils;g.mix(f,{add:function(b,e,d,c){e=g.trim(e);b=a.query(b);i.batchForType(function(b,a,d,e){d=i.normalizeParam(a,d,e);a=d.type;for(e=b.length-1;0<=e;e--)n(b[e],a,d)},1,b,e,d,c);return b},remove:function(b,e,d,c){e=g.trim(e);b=a.query(b);i.batchForType(function(b,a,d,e){d=i.normalizeParam(a,d,e);a=d.type;for(e=b.length-1;0<=e;e--){var c=b[e],q=a,f=d,f=g.merge(f),h=void 0,q=
l(f,q),c=k.getCustomEvents(c),h=(c||{}).events;if(c&&h)if(q)(h=h[q])&&h.detach(f);else for(q in h)h[q].detach(f)}},1,b,e,d,c);return b},delegate:function(b,a,d,i,c){return f.add(b,a,{fn:i,context:c,selector:d})},undelegate:function(b,a,d,i,c){return f.remove(b,a,{fn:i,context:c,selector:d})},fire:function(b,e,d,c){var j=void 0,d=d||{};d.synthetic=1;i.splitAndRun(e,function(e){d.type=e;var o,f,h,e=i.getTypedGroups(e);(f=e[1])&&(f=i.getGroupsRe(f));e=e[0];g.mix(d,{type:e,_ks_groups:f});b=a.query(b);
for(f=b.length-1;0<=f;f--)o=b[f],h=k.getCustomEvent(o,e),!c&&!h&&(h=new k({type:e,currentTarget:o})),h&&(o=h.fire(d,c),!1!==j&&void 0!==o&&(j=o))});return j},fireHandler:function(b,a,d){return f.fire(b,a,d,1)},_clone:function(b,a){var d;(d=k.getCustomEvents(b))&&g.each(d.events,function(b,d){g.each(b.observers,function(b){n(a,d,b)})})},_ObservableDOMEvent:k});f.on=f.add;f.detach=f.remove;return f},{requires:"event/base,dom,./special,./utils,./observable,./object".split(",")});
KISSY.add("event/dom/base",function(g,f,a,c,h,k){g.mix(f,{KeyCodes:a,_DOMUtils:c,Gesture:h,_Special:k});return f},{requires:"event/base,./base/key-codes,./base/utils,./base/gesture,./base/special,./base/api,./base/mouseenter,./base/mousewheel,./base/valuechange".split(",")});KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/key-codes",function(g){var f=g.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(c){if(c.altKey&&!c.ctrlKey||c.metaKey||c.keyCode>=a.F1&&c.keyCode<=a.F12)return!1;switch(c.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(c){if(c>=a.ZERO&&c<=a.NINE||c>=a.NUM_ZERO&&c<=a.NUM_MULTIPLY||c>=a.A&&c<=a.Z||f.webkit&&0==c)return!0;switch(c){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/mouseenter",function(g,f,a,c){g.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(f){c[f.name]={onFix:f.fix,delegateFix:f.fix,handle:function(c,f,h){var g=c.currentTarget,i=c.relatedTarget;if(!i||i!==g&&!a.contains(g,i))return[f.simpleNotify(c,h)]}}});return f},{requires:["./api","dom","./special"]});
KISSY.add("event/dom/base/mousewheel",function(g,f){var a=g.UA.gecko?"DOMMouseScroll":"mousewheel";f.mousewheel={onFix:a,delegateFix:a}},{requires:["./special"]});
KISSY.add("event/dom/base/object",function(g,f,a){function c(b){this.scale=this.rotation=this.targetTouches=this.touches=this.changedTouches=this.which=this.wheelDelta=this.view=this.toElement=this.srcElement=this.shiftKey=this.screenY=this.screenX=this.relatedTarget=this.relatedNode=this.prevValue=this.pageY=this.pageX=this.offsetY=this.offsetX=this.newValue=this.metaKey=this.keyCode=this.handler=this.fromElement=this.eventPhase=this.detail=this.data=this.ctrlKey=this.clientY=this.clientX=this.charCode=
this.cancelable=this.button=this.bubbles=this.attrName=this.attrChange=this.altKey=a;c.superclass.constructor.call(this);this.originalEvent=b;this.isDefaultPrevented=b.defaultPrevented||b.returnValue===n||b.getPreventDefault&&b.getPreventDefault()?function(){return l}:function(){return n};h(this);k(this)}function h(b){for(var e=b.originalEvent,d=i.length,c,f=e.currentTarget,f=9===f.nodeType?f:f.ownerDocument||m;d;)c=i[--d],b[c]=e[c];b.target||(b.target=b.srcElement||f);3===b.target.nodeType&&(b.target=
b.target.parentNode);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement);b.pageX===a&&b.clientX!==a&&(e=f.documentElement,d=f.body,b.pageX=b.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),b.pageY=b.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));b.which===a&&(b.which=b.charCode===a?b.keyCode:b.charCode);b.metaKey===a&&(b.metaKey=b.ctrlKey);!b.which&&b.button!==a&&(b.which=b.button&
1?1:b.button&2?3:b.button&4?2:0)}function k(b){var e,d,i,c=b.detail;b.wheelDelta&&(i=b.wheelDelta/120);b.detail&&(i=-(0==c%3?c/3:c));b.axis!==a&&(b.axis===b.HORIZONTAL_AXIS?(d=0,e=-1*i):b.axis===b.VERTICAL_AXIS&&(e=0,d=i));b.wheelDeltaY!==a&&(d=b.wheelDeltaY/120);b.wheelDeltaX!==a&&(e=-1*b.wheelDeltaX/120);!e&&!d&&(d=i);(e!==a||d!==a||i!==a)&&g.mix(b,{deltaY:d,delta:i,deltaX:e})}var m=g.Env.host.document,l=!0,n=!1,i="type,altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis,changedTouches,touches,targetTouches,rotation,scale".split(",");
g.extend(c,f._Object,{constructor:c,preventDefault:function(){var b=this.originalEvent;b.preventDefault?b.preventDefault():b.returnValue=n;c.superclass.preventDefault.call(this)},stopPropagation:function(){var b=this.originalEvent;b.stopPropagation?b.stopPropagation():b.cancelBubble=l;c.superclass.stopPropagation.call(this)}});return f.DOMEventObject=c},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(g,f,a,c,h,k,m){function l(a){g.mix(this,a);this.reset()}var n=m._Utils;g.extend(l,m._ObservableEvent,{setup:function(){var i=this.type,b=a[i]||{},e=this.currentTarget,d=c.data(e).handle;(!b.setup||!1===b.setup.call(e,i))&&c.simpleAdd(e,i,d)},constructor:l,reset:function(){l.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var b=a.target,e=this.currentTarget,d=this.observers,c=[],j,h,o=this.delegateCount||0,g,k;if(o&&
!b.disabled)for(;b!=e;){g=[];for(h=0;h<o;h++)k=d[h],f.test(b,k.selector)&&g.push(k);g.length&&c.push({currentTarget:b,currentTargetObservers:g});b=b.parentNode||e}c.push({currentTarget:e,currentTargetObservers:d.slice(o)});h=0;for(b=c.length;!a.isPropagationStopped()&&h<b;++h){e=c[h];g=e.currentTargetObservers;e=e.currentTarget;a.currentTarget=e;for(e=0;!a.isImmediatePropagationStopped()&&e<g.length;e++)d=g[e],d=d.notify(a,this),!1!==j&&void 0!==d&&(j=d)}return j},fire:function(c,b){var c=c||{},e=
this.type,d=a[e];d&&d.onFix&&(e=d.onFix);var h,j,d=this.currentTarget,m=!0;c.type=e;c instanceof k||(j=c,c=new k({currentTarget:d,target:d}),g.mix(c,j));j=d;h=f.getWindow(j.ownerDocument||j);var o=h.document,s=[],n=0,r="on"+e;do s.push(j),j=j.parentNode||j.ownerDocument||j===o&&h;while(j);j=s[n];do{c.currentTarget=j;if(h=l.getCustomEvent(j,e))h=h.notify(c),!1!==m&&void 0!==h&&(m=h);j[r]&&!1===j[r].call(j)&&c.preventDefault();j=s[++n]}while(!b&&j&&!c.isPropagationStopped());if(!b&&!c.isDefaultPrevented()){var p;
try{if(r&&d[e]&&("focus"!==e&&"blur"!==e||0!==d.offsetWidth)&&!g.isWindow(d))(p=d[r])&&(d[r]=null),l.triggeredEvent=e,d[e]()}catch(t){}p&&(d[r]=p);l.triggeredEvent=""}return m},on:function(c){var b=this.observers,e=a[this.type]||{},c=c instanceof h?c:new h(c);-1==this.findObserver(c)&&(c.selector?(b.splice(this.delegateCount,0,c),this.delegateCount++):c.last?(b.push(c),this.lastCount++):b.splice(b.length-this.lastCount,0,c),e.add&&e.add.call(this.currentTarget,c))},detach:function(c){var b,e=a[this.type]||
{},d="selector"in c,f=c.selector,h=c.context,g=c.fn,o=this.currentTarget,k=this.observers,c=c.groups;if(k.length){c&&(b=n.getGroupsRe(c));var m,l,p,t,v=k.length;if(g||d||b){h=h||o;m=c=0;for(l=[];c<v;++c)p=k[c],t=p.context||o,h!=t||g&&g!=p.fn||d&&(f&&f!=p.selector||!f&&!p.selector)||b&&!p.groups.match(b)?l[m++]=p:(p.selector&&this.delegateCount&&this.delegateCount--,p.last&&this.lastCount&&this.lastCount--,e.remove&&e.remove.call(o,p));this.observers=l}else this.reset();this.checkMemory()}},checkMemory:function(){var f=
this.type,b,e,d=a[f]||{},h=this.currentTarget,j=c.data(h);if(j&&(b=j.events,this.hasObserver()||(e=j.handle,(!d.tearDown||!1===d.tearDown.call(h,f))&&c.simpleRemove(h,f,e),delete b[f]),g.isEmptyObject(b)))j.handle=null,c.removeData(h)}});l.triggeredEvent="";l.getCustomEvent=function(a,b){var e=c.data(a),d;e&&(d=e.events);if(d)return d[b]};l.getCustomEvents=function(a,b){var e=c.data(a);!e&&b&&c.data(a,e={});return e};return l},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/observer",function(g,f,a){function c(a){c.superclass.constructor.apply(this,arguments)}g.extend(c,a._Observer,{keys:"fn,selector,data,context,originalType,groups,last".split(","),notifyInternal:function(a,c){var g,l,n=a.type;this.originalType&&(a.type=this.originalType);(g=f[a.type])&&g.handle?(g=g.handle(a,this,c))&&0<g.length&&(l=g[0]):l=this.simpleNotify(a,c);!1===l&&a.halt();a.type=n;return l}});return c},{requires:["./special","event/base"]});
KISSY.add("event/dom/base/special",function(){return{}});
KISSY.add("event/dom/base/utils",function(g,f){var a=g.Env.host.document;return{simpleAdd:a&&a.addEventListener?function(a,f,g,m){a.addEventListener&&a.addEventListener(f,g,!!m)}:function(a,f,g){a.attachEvent&&a.attachEvent("on"+f,g)},simpleRemove:a&&a.removeEventListener?function(a,f,g,m){a.removeEventListener&&a.removeEventListener(f,g,!!m)}:function(a,f,g){a.detachEvent&&a.detachEvent("on"+f,g)},data:function(a,g){return f.data(a,"ksEventTargetId_1.30",g)},removeData:function(a){return f.removeData(a,
"ksEventTargetId_1.30")}}},{requires:["dom"]});
KISSY.add("event/dom/base/valuechange",function(g,f,a,c){function h(b){if(a.hasData(b,j)){var c=a.data(b,j);clearTimeout(c);a.removeData(b,j)}}function k(a){h(a.target)}function m(b){var c=b.value,d=a.data(b,q);c!==d&&(f.fireHandler(b,e,{prevVal:d,newVal:c}),a.data(b,q,c))}function l(b){a.hasData(b,j)||a.data(b,j,setTimeout(function(){m(b);a.data(b,j,setTimeout(arguments.callee,u))},u))}function n(b){var c=b.target;"focus"==b.type&&a.data(c,q,c.value);l(c)}function i(a){m(a.target)}function b(b){a.removeData(b,
q);h(b);f.remove(b,"blur",k);f.remove(b,"webkitspeechchange",i);f.remove(b,"mousedown keyup keydown focus",n)}var e="valuechange",d=a.nodeName,q="event/valuechange/history",j="event/valuechange/poll",u=50;c[e]={setup:function(){var a=d(this);if("input"==a||"textarea"==a)b(this),f.on(this,"blur",k),f.on(this,"webkitspeechchange",i),f.on(this,"mousedown keyup keydown focus",n)},tearDown:function(){b(this)}};return f},{requires:["./api","dom","./special"]});
