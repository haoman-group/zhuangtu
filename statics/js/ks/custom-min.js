/*
Copyright 2013, KISSY UI Library v1.32
MIT Licensed
build time: Aug 29 20:11
*/
KISSY.add("event/custom/api-impl",function(e,i,c,j){var g=e.trim,f=c._Utils,l=f.splitAndRun;return e.mix(i,{fire:function(b,a,d){var h=void 0,d=d||{};l(a,function(a){var k,a=f.getTypedGroups(a);k=a[1];a=a[0];k&&(k=f.getGroupsRe(k),d._ks_groups=k);k=(j.getCustomEvent(b,a)||new j({currentTarget:b,type:a})).fire(d);!1!==h&&void 0!==k&&(h=k)});return h},publish:function(b,a,d){var h;l(a,function(a){h=j.getCustomEvent(b,a,1);e.mix(h,d)});return b},addTarget:function(b,a){var d=i.getTargets(b);e.inArray(a,
d)||d.push(a);return b},removeTarget:function(b,a){var d=i.getTargets(b),h=e.indexOf(a,d);-1!=h&&d.splice(h,1);return b},getTargets:function(b){b["__~ks_bubble_targets"]=b["__~ks_bubble_targets"]||[];return b["__~ks_bubble_targets"]},on:function(b,a,d,h){a=g(a);f.batchForType(function(a,d,h){d=f.normalizeParam(a,d,h);a=d.type;if(a=j.getCustomEvent(b,a,1))a.on(d)},0,a,d,h);return b},detach:function(b,a,d,h){a=g(a);f.batchForType(function(a,d,h){var m=f.normalizeParam(a,d,h);(a=m.type)?(a=j.getCustomEvent(b,
a,1))&&a.detach(m):(a=j.getCustomEvents(b),e.each(a,function(a){a.detach(m)}))},0,a,d,h);return b}})},{requires:["./api","event/base","./observable"]});KISSY.add("event/custom/api",function(){return{}});
KISSY.add("event/custom",function(e,i,c,j){var g={};e.each(c,function(f,c){g[c]=function(){var b=e.makeArray(arguments);b.unshift(this);return f.apply(null,b)}});c=e.mix({_ObservableCustomEvent:j,Target:g},c);e.mix(i,{Target:g,custom:c});e.EventTarget=g;return c},{requires:["./base","./custom/api-impl","./custom/observable"]});KISSY.add("event/custom/object",function(e,i){function c(j){c.superclass.constructor.call(this);e.mix(this,j)}e.extend(c,i._Object);return c},{requires:["event/base"]});
KISSY.add("event/custom/observable",function(e,i,c,j,g){function f(){f.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var l=g._Utils;e.extend(f,g._ObservableEvent,{constructor:f,on:function(a){a=new c(a);-1==this.findObserver(a)&&this.observers.push(a)},checkMemory:function(){var a=this.currentTarget,d=f.getCustomEvents(a);d&&(this.hasObserver()||delete d[this.type],e.isEmptyObject(d)&&delete a[b])},fire:function(a){if(this.hasObserver()||
this.bubbles){var a=a||{},d=this.type,h=this.defaultFn,b,k,e;b=this.currentTarget;var c=a,g;a.type=d;c instanceof j||(c.target=b,c=new j(c));c.currentTarget=b;a=this.notify(c);!1!==g&&void 0!==a&&(g=a);if(this.bubbles){e=(k=i.getTargets(b))&&k.length||0;for(b=0;b<e&&!c.isPropagationStopped();b++)a=i.fire(k[b],d,c),!1!==g&&void 0!==a&&(g=a)}h&&!c.isDefaultPrevented()&&(d=f.getCustomEvent(c.target,c.type),(!this.defaultTargetOnly&&!d.defaultTargetOnly||this==c.target)&&h.call(this));return g}},notify:function(a){var d=
this.observers,b,c,e=d.length,f;for(f=0;f<e&&!a.isImmediatePropagationStopped();f++)b=d[f].notify(a,this),!1!==c&&void 0!==b&&(c=b);return c},detach:function(a){var d,b=a.fn,c=a.context,e=this.currentTarget,f=this.observers,a=a.groups;if(f.length){a&&(d=l.getGroupsRe(a));var g,j,i,n,o=f.length;if(b||d){c=c||e;g=a=0;for(j=[];a<o;++a)if(i=f[a],n=i.context||e,c!=n||b&&b!=i.fn||d&&!i.groups.match(d))j[g++]=i;this.observers=j}else this.reset();this.checkMemory()}}});var b="__~ks_custom_events";f.getCustomEvent=
function(a,b,c){var e,g=f.getCustomEvents(a,c);e=g&&g[b];!e&&c&&(e=g[b]=new f({currentTarget:a,type:b}));return e};f.getCustomEvents=function(a,c){!a[b]&&c&&(a[b]={});return a[b]};return f},{requires:["./api","./observer","./object","event/base"]});KISSY.add("event/custom/observer",function(e,i){function c(){c.superclass.constructor.apply(this,arguments)}e.extend(c,i._Observer,{keys:["fn","context","groups"]});return c},{requires:["event/base"]});
